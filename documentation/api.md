# Plans API

## Common provisions

#### Terminology

The terminology of [RFC 2119](https://www.ietf.org/rfc/rfc2119.txt) (specifically __must__, __should__, __may__ and their negatives) applies.  The word __will__, when applied to the Plans API ("the API"), has the same meaning as __must__.

#### Protocol

The API supports communication over HTTPS only.

#### Encoding

The API supports communication using JSON encoding only.  The client __must__ submit the headers `Content-Type: application/json` and `Accept: application/json` for all requests.  Failure to do so __will__ result in a `415 Unsupported Media Type` response.  The API __will__ include the header `Content-Type: application/json` with its response.

#### Authentication

Unless otherwise specified, the endpoints in the API are authenticated by a JWT bearer token.  One token source are accepted:

* Tokens generated by Amazon Cognito and acquired as part of authentication to the Users Service;

The client __must__ submit the header `Authorization: <JWT>` with all requests. Failure to do so, or submitting an invalid or expired JWT, __will__ result in a `401 Unauthorized` response.  

#### General responses

In addition to the AWS API Gateway responses and the specific responses for each endpoint, the server __may__ respond with one of the following HTTP responses:

* `400 Bad Request` with `Status` header equal to `InvalidSchema`, if the JSON body of the request does not match the requirements of the endpoint.
* `403 Forbidden` with `Status` header equal to `Forbidden`, if the user is not allowed to perform the requested action.
* `404 Unknown` with `Status` header equal to `UnknownEndpoint`, if an invalid endpoint was requested.

## Schema

### Simple

The following simple types __may__ be used in responses:

* `string`, `number`: as defined in the [JSON Schema](http://json-schema.org) standard.
* `Uuid`: a `string` matching the regular expression `^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$`, that is, the string representation of an [RFC 4122](https://tools.ietf.org/html/rfc4122) UUID.
* `Datetime`: a `string` matching the regular expression `/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(Z|+\d{2}:\d{2})/` and representing a date and time in full [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) format.

## Endpoints

### Daily Readiness

#### Create

This endpoint can be called to register a new daily readiness survey.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/daily_readiness`. The request method __must__ be `POST`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
	"date_time": Datetime,
	"user_id": Uuid,
	"soreness": [{"body_part": number, "severity": number, "side": number, "pain": boolean}],
	"sleep_quality": number,
	"readines": number,
    "wants_functional_strength": boolean
    "current_sport": number
    "current_position": number
}
```
* `date_time` __should__ reflect the local time that survey was taken
* `soreness` __should__ reflect the number of body part that the user indicated soreness. Length __could__ be 0.
* `body_part` __should__ be an integer reflecting BodyPart enum
* `severity` __should__ be an integer between 1 and 5
* `side` __should__ be an integer between 0 and 2
* `pain` __should__ be a boolean to indicate whether it's pain or soreness.
* `sleep_quality` __should__ be an integer between 1 and 10
* `readiness` __should__ be an integer between 1 and 10
* `wants_functional_strength` is optional argument only for the users that are eligible for functional strength and should be included once they are eligible
* `current_sport_name` __should__ be integer representing SportName enumeration
* `current_position` __should__ be integer representating position enumeration for specific sport or NoSportPosition enumeration

Note: `current_sport_name` and `current_position` are only required when the user is first eligible for functional strength. `current_position` should always be present. `current_sport` is optional and if it's absent, NoSportPosition is assumed for `current_position`.

```
POST /plans/version/daily_readiness HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "date_time": "2018-09-21T17:45:24Z",
    "user_id":"a1233423-73d3-4761-ac92-89cc15921d34",
    "soreness":[{"body_part": 18, "severity": 2, "side": 0}],
    "sleep_quality":4,
    "readiness":4,
    "wants_functional_strength": true,
    "current_sport_name": 14,
    "current_position": 1
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```


#### Soreness history

This endpoint can be called to get the body parts where soreness was reported in the last report as well as the user's eligibility status for functional strength.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/daily_readiness/previous`. The request method __must__ be `GET`.

##### Request
This request does not require a body.


```
GET /plans/version/daily_readiness/previous HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

```
Authentication is required for this endpoint

##### Responses
 
 The Service __will__ respond with HTTP Status `200 OK`, with a body with the following syntax:
 
```
{
    "body_parts": [
            		{"body_part": number, "side": number},
            		{"body_part": number, "side": number}
            		],
    "completed_functional_strength_sessions": number,
    "current_position": number,
    "current_sport_name": number,
    "functional_strength_eligible": boolean,
}
```
* `body_part` will be a list of enumerated body parts (potentially empty)
* `completed_functional_strength_sessions` will be a count of completed functional strength sessions for the last week
* `current_position` and `current_sport_name` will be enumeration
* `current_position` exists but `current_sport_name` does not, then it's implied that the user wants functional strength for sport-less activity



### Post-Session Survey (Deprecated)

#### Create

This endpoint can be called to register a a post-session survey.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/post_session_survey`. The request method __must__ be `POST`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
	"user_id": Uuid,
	"event_date": Datetime,
	"session_id": Uuid,
	"session_type": number,
	"survey": {
		"RPE": number,
		"soreness": [{"body_part": number, "severity": number, "side": number, "pain", boolean}]
	}
}
```
* `event_date` __should__ reflect the date and time when the survey happened
* `session_id` __should__ be id of the session associated. It's __optional__ if the survey is associated with new session that doesn't exist in daily_plan
* `session_type` __should__ be an integer reflecting enumeration of different session type (0-5)
* `RPE` __should__ be an integer between 1 and 10
* `soreness` __should__ follow the same definition as in readiness_survey

```
POST /plans/version/post_session_survey HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "event_date": "2018-07-03",
    "session_id": "69223f69-08b2-4e61-be2a-0e9b38787cec",
    "session_type": 1,
    "survey": 
            {
               "RPE": 4,
               "soreness": [
               		{"body_part": 17.0, "severity": 5, "side": 0, pain: false},
               		{"body_part": 14, "severity": 3, "side": 0, pain: false}
               		]
            }
            
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```


### Session

#### Create

This endpoint can be called to log a new session to today's plan and should include the session information as well as post-session surveys for the session being logged.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/session`. The request method __must__ be `POST`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "event_date": Datetime,
    "sport_name": number,
    "session_type": number,
    "duration": number,
    "description": string,
    "post_session_survey": {
                            "event_date": Datetime
                            "RPE": number,
                            "soreness": [{"body_part": number, "severity": number, "side": number, "pain", boolean}]
                        }
}
```
* `event_date` __should__ reflect the date and time the session is scheduled for.
* `session_type` __should__ be an integer reflecting SessionType enumeration.
* `sport_name` __should__ be an integer reflecting SportName enumeration.
* `strength_and_conditioning_type` __should__ be an integer reflecting StrengthAndContioningType enumeration
* `duration` __should__ be in minutes and reflect the length of time the session is scheduled for.
* `description` is __optional__ parameter to provide short description of the session they're adding

Note: A session will either have `sport_name` or `strength_and_conditioning_type` `session_type=1` will have `strength_and_conditioning_type` and `session_type=1=0,2,3,6` will have `sport_name` associated
```
POST /plans/version/session HTTP/1.1
Host: apis.dev.fathomai.com
Content-Type: application/json
Authorization: eyJ0eX...xA8
Cache-Control: no-cache
Postman-Token: 4b6c3946-89fd-4cde-ae29-3a4984d5f373

{
    "user_id":"a1233423-73d3-4761-ac92-89cc15921d34",
    "event_date": "2018-09-14T19:54:48Z",
    "session_type": 0,
    "sport_name": 0,
    "duration": 90,
    "description": "Evening Practice",
    "post_session_survey": {
               "event_date": "2018-09-14T19:54:48Z",
               "RPE": 5,
               "soreness": [
                            {"body_part": 16, "severity": 3, "pain": false, "side": 1},
                            {"body_part": 6, "severity": 2, "pain": false, "side": 2},
                            ]
            }
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```

#### Delete

This endpoint can be called to delete existing externally regimented session from today or yesterday's plan.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/session/{session_id}`. The request method __must__ be `DELETE`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
	"user_id": Uuid,
	"event_date": Datetime,
	"session_type": number
}
```
* `event_date` __should__ reflect the date and time the session was scheduled for.
* `session_type` __should__ be an integer reflecting SessionType enumeration.

```
DELETE /plans/version/session/73e8f603-d2d5-423a-b2b6-fe0996a373c8 HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "event_date": "2018-08-10T16:30:00Z",
    "session_type": 0
}
```
##### Responses
 
 If the delete was successful, the Service __will__ respond with HTTP Status `200 OK`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```

#### Update

This endpoint can be called to update the details of an existing session that hasn't already been logged. This endpoint can be called to reschedule a session, or change duration/sport/session type/description of the session.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/session/{session_id}`. The request method __must__ be `PATCH`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "event_date": Datetime,
    "sport_name": number,
    "session_type": number,
    "duration": number,
    "description": string
}
```
* `event_date` __should__ reflect the date and time the session is scheduled for. If the session is being recheduled, it should reflect the new time.
* `session_type` __should__ be an integer reflecting SessionType enumeration.
* `sport_name` __should__ be an integer reflecting SportName enumeration.
* `duration` __should__ be in minutes and reflect the length of time the session is scheduled for.
* `description` is __optional__ parameter to provide short description of the session they're adding

```
PATCH /plans/version/session/73e8f603-d2d5-423a-b2b6-fe0996a373c8 HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "event_date": "2018-08-10T16:30:00Z",
    "session_type": 1,
    "sport_name": 5,
    "duration": 90,
    "description": "Late Afteronoon Practice"
}
```
##### Responses
 
 If the update was successful, the Service __will__ respond with HTTP Status `200 OK`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```

#### Send sensor data

This endpoint can be called to write sensor data for sessions(s)

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/session/sensor_data`. The request method __must__ be `POST`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "last_sensor_sync": Datetime
    "sessions": [Session]
}
```
A `Session` object __will__ have the following schema:

```
{
    "session_id": Uuid,
    "session_type": number,
    "event_date": Datetime
    "start_time": Datetime,
    "end_time": Datetime,
    "inactive_duration": number,
    "low_duration": number, 
    "mod_duration": number,
    "high_duration": number,
    "inactive_accel": number,
    "low_accel": number, 
    "mod_accel": number,
    "high_accel": number

}
```
* `session_id` , `session_type` and `event_date` are optional arguments


```
POST /plans/version/session/sensor_data HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "last_sensor_sync": "2018-09-05T14:06:44Z",
    "sessions":
    [
        {
            "start_time": "2018-07-18T13:40:20Z",
            "end_time": "2018-07-18T14:40:20Z",
            "inactive_duration": 1500,
            "low_duration": 500, 
            "mod_duration": 200,
            "high_duration": 60,
            "inactive_accel": 1500,
            "low_accel": 500, 
            "mod_accel": 200,
            "high_accel": 60
        }
    ]
}
```
##### Responses
 
 If all sessions were updated successfully, the Service __will__ respond with HTTP Status `200 OK`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```


### Active Recovery

#### Mark Completed

This endpoint can be called to mark either the pre- or post-recovery completed.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/active_recovery`. The request method __must__ be `PATCH`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "event_date": Datetime,
    "recovery_type": string
}
```
* `event_date` __should__ be the time when user completes the session.
* `recovery_type` __should__ be either `pre` or `post`

```
PATCH /plans/version/active_recovery HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ
{
    "user_id":"a1233423-73d3-4761-ac92-89cc15921d34",
    "event_date": "2018-09-21T17:53:39Z",
    "recovery_type": "post"
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `202 Accepted`, and return the daily_plan in the body with following syntax.
 
```
{
    "daily_plans": [daily_plan]
}
```
* `daily_plan` will have the same structure as defined in output of daily_plan route.



### Functional Strength

#### Mark Completed

This endpoint can be called to mark functional strength completion.

##### Query String
 
The client __must__ submit a request to the endpoint `/plans/version/functional_strength`. The request method __must__ be `PATCH`.

##### Request

The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "event_date": Datetime
}
```
* `event_date` __should__ be the time when user completes the session.

```
PATCH /plans/version/functional_strength HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id":"a1233423-73d3-4761-ac92-89cc15921d34",
    "event_date": "2018-09-21T17:53:39Z"
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `202 Accepted`, and return the daily_plan in the body with following syntax.
 
```
{
    "daily_plans": [daily_plan]
}
```
* `daily_plan` will have the same structure as defined in output of daily_plan route.


### Schedule

#### Daily Schedule
This API can be used to submit athlete's daily schedule when they first open the app.

##### Query String
The client __must__ submit a request to the endpoint `/plans/version/daily_schedule`. The request method __must__ be `POST`.

##### Request
The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "event_date": Datetime
    "sessions": [Session, Session]
}
```
* `event_date` __should__ be reflect the time when the daily_schedule was completed
* `Session` object __should__ have the following schema
```
    {
        "session_type": number,
        "start_time": Datetime,
        "duration": number,
        "description": string
    }
```
* `start_time` should reflect the date and time when the session is scheduled
* `duration` should be in minutes

```
POST /plans/daily_schedule HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "event_date": "2018-07-26",
    "sessions":
    [
        {
            "session_type": 0,
            "event_date": "2018-07-26T07:30:00Z",
            "duration": 90,
            "descrption": "Morning Practice"
        },
        {
            "session_type": 1,
            "event_date": "2018-07-26T19:30:00Z",
            "duration": 30,
            "description": "Evening Biking"
        }
        ]
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "sessions": [Session, Session]
}
```
If there were no session scheduled/created for time prior to the schedule being created by the user __sessions__ will be an empty list.
Each session will have __uuid__, __date__, __time__ to be used to ask user for post-session survey.

### Weekly Training

#### Cross-Training

##### Query String
The client __must__ submit a request to the endpoint `/plans/version/weekly_schedule/cross_training`. The request method __must__ be `POST`.

##### Request
The client __must__ submit a request body containing a JSON object with the following schema:
```
{
	"user_id": Uuid,
	"activities": [string, string],
	"days_of_week": [number, number]
	"duration": number
}
```
* `activities` __should__ reflect the list of cross-training activities user performs in the week
* `days_of_week` __should__ be a list of days of the week that the user plans to perform the activities encoded 0-Monday ... 6-Sunday
* `duration` __should__ be an integer representing average minutes per session

```
POST /plans/version/weekly_schedule/cross_training HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "activities": ["cycling", "weightlifting", "yoga"],
    "days_of_week": [0,1,4],
    "duration": 50
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```

#### Training

##### Query String
The client __must__ submit a request to the endpoint `/plans/version/weekly_schedule/training`. The request method __must__ be `POST`.

##### Request
The client __must__ submit a request body containing a JSON object with the following schema:
```
{
	"user_id": Uuid,
	"sports": [sport1, sport2]
}
```
Where sports is the weekly schedule for a sport of the following schema:
```
{
	"sport": string,
	"practice": {
		"days_of_week": [number, number],
		"duration": number
		},
	"competition": {
		"days_of_week": [number]
	}
}

```
###### Example
```
POST /plans/version/weekly_schedule/training HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
	"sports": [
        {"sport": "sportX",
		"practice": {
			"days_of_week": [0, 1, 2, 3, 4, 5],
			"duration": 90
		},
		"competition": {
			"days_of_week": [6]
		}
	},
    { "sport": "sportY",
		"practice": {
			"days_of_week": [0, 1, 2, 3, 4, 5],
			"duration": 90
		},
		"competition": {
			"days_of_week": [6]
		}
	}
        ]
}
```
##### Responses
 
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```


### Daily Plans

#### Get daily plan

##### Query String
The client __must__ submit a request to the endpoint `/plans/version/daily_plan`. The request method __must__ be `POST`.

##### Request
The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "user_id": Uuid,
    "event_date": Datetime
    "start_date": string,
    "end_date": string
}
```
* `event_date` __should__ reflect the time (in local timezone) when the api call is made.
* `start_date` __should__ should be of format `yyyy-mm-dd`
* `end_date` __should__ should be of format `yyyy-mm-dd` but is __optional__

```
POST /plans/version/daily_plan HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "event_date": "2018-07-31T02:50:02Z",
    "start_date": "2018-07-31"
}
```
##### Responses
 
The Service __will__ respond with HTTP Status `200 OK`, with a body with the following syntax:
 
```
{
    "daily_plans": [daily_plan1, daily_plan2]
}
```
* `daily_plans` __could__ be emply list
* each `daily_plan*` will be of following syntax:
```
{
    "daily_plans": [
        {
            "bump_up_sessions": [],
            "cross_training_sessions": [],
            "daily_readiness_survey_completed": true,
            "date": "2018-07-30",
            "game_sessions": [],
            "last_updated": "2018-07-30T21:02:25Z",
            "post_recovery": {
                "activate_exercises": [
                    {
                        "bilateral": true,
                        "display_name": "Bird-dog (Opposite Arm/Leg Raise)",
                        "goal_text": "Focused muscle activation",
                        "library_id": "50",
                        "name": "Quadruped Arm/Opposite Leg Raise",
                        "position_order": 10,
                        "reps_assigned": 10,
                        "seconds_duration": 60,
                        "seconds_per_rep": 3,
                        "seconds_per_set": null,
                        "sets_assigned": 1,
                        "unit_of_measure": "count",
                        "youtube_id": "wiFNA3sqjCA"
                    },
                    {
                        "bilateral": false,
                        "display_name": "Posterior Pelvic Tilt",
                        "goal_text": "Focused muscle activation",
                        "library_id": "79",
                        "name": "Posterior Pelvic Tilt",
                        "position_order": 11,
                        "reps_assigned": 10,
                        "seconds_duration": 20,
                        "seconds_per_rep": 2,
                        "seconds_per_set": null,
                        "sets_assigned": 1,
                        "unit_of_measure": "count",
                        "youtube_id": "q0gRZJ5M3ls"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Lying Knee Flexion and Hip Internal Rotation",
                        "goal_text": "Increase strength",
                        "library_id": "32",
                        "name": "Knee Flexion with Hip Internally Rotated",
                        "position_order": 12,
                        "reps_assigned": 10,
                        "seconds_duration": 40,
                        "seconds_per_rep": 2,
                        "seconds_per_set": null,
                        "sets_assigned": 1,
                        "unit_of_measure": "count",
                        "youtube_id": "ToOjPbDb6wQ"
                    }
                ],
                "end_time": "None",
                "goal_text": "Get stronger and move your groin, knee and hip more efficiently to prevent fatigue",
                "impact_score": 2,
                "inhibit_exercises": [
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Hip Flexor",
                        "goal_text": "Increase blood flow",
                        "library_id": "54",
                        "name": "SMR - Hip Flexor",
                        "position_order": 0,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "bdbsy5vFz10"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Outer Thigh (IT Band)",
                        "goal_text": "Increase blood flow",
                        "library_id": "4",
                        "name": "SMR - IT-Band",
                        "position_order": 1,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "asigNf1sh-k"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Hamstrings",
                        "goal_text": "Increase blood flow",
                        "library_id": "3",
                        "name": "SMR - Hamstrings",
                        "position_order": 2,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "wQ6uUuBWCbw"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Inner Thigh (Adductor)",
                        "goal_text": "Increase blood flow",
                        "library_id": "1",
                        "name": "SMR - Adductors",
                        "position_order": 3,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "vkVg1dEmjwE"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Quads",
                        "goal_text": "Increase flexibility",
                        "library_id": "48",
                        "name": "SMR Quadriceps",
                        "position_order": 4,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "ERTVBjwgPS4"
                    }
                ],
                "integrate_exercises": [],
                "lengthen_exercises": [
                    {
                        "bilateral": true,
                        "display_name": "Standing Outer Hip (TFL) Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "28",
                        "name": "Standing TFL Static Stretch",
                        "position_order": 5,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "ClJL9Kn5DHw"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Lunging Hip Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "49",
                        "name": "Kneeling Hip Flexor Static Stretch",
                        "position_order": 6,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "XbN3TvLEm2A"
                    },
                    {
                        "bilateral": false,
                        "display_name": "Child's Pose (Arms Straight)",
                        "goal_text": "Increase flexibility",
                        "library_id": "103",
                        "name": "Child's Pose Arms Straight",
                        "position_order": 7,
                        "reps_assigned": 30,
                        "seconds_duration": 30,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "pJcobQf324o"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Lying Hamstring Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "9",
                        "name": "Hamstrings Static Stretch ",
                        "position_order": 8,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "z73l6oZUniQ"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Standing Inner Thigh (Adductor) Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "8",
                        "name": "Adductors Static Stretch",
                        "position_order": 9,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "Qmq5fGSrAmg"
                    }
                ],
                "minutes_duration": 11.5,
                "start_time": "None",
                "why_text": "mild soreness and discomfort and hard effort"
            },
            "practice_sessions": [
                {
                    "data_transferred": false,
                    "description": "",
                    "duration_minutes": null,
                    "duration_sensor": null,
                    "event_date": null,
                    "external_load": null,
                    "high_intensity_load": null,
                    "high_intensity_minutes": null,
                    "low_intensity_load": null,
                    "low_intensity_minutes": null,
                    "mod_intensity_load": null,
                    "mod_intensity_minutes": null,
                    "post_session_survey": {
                        "RPE": 4,
                        "event_date": "2018-07-30T18:05:20Z",
                        "soreness": [
                            {
                                "body_part": 7,
                                "severity": 1,
                                "side": 2
                            },
                            {
                                "body_part": 4,
                                "severity": 2,
                                "side": 2
                            }
                        ]
                    },
                    "sensor_end_date_time": null,
                    "sensor_start_date_time": null,
                    "session_id": "99d64d90-a6c0-4593-835a-cfa04e97871e"
                }
            ],
            "pre_recovery": null,
            "recovery_am": null,
            "recovery_pm": {
                "activate_exercises": [
                    {
                        "bilateral": true,
                        "display_name": "Bird-dog (Opposite Arm/Leg Raise)",
                        "goal_text": "Focused muscle activation",
                        "library_id": "50",
                        "name": "Quadruped Arm/Opposite Leg Raise",
                        "position_order": 10,
                        "reps_assigned": 10,
                        "seconds_duration": 60,
                        "seconds_per_rep": 3,
                        "seconds_per_set": null,
                        "sets_assigned": 1,
                        "unit_of_measure": "count",
                        "youtube_id": "wiFNA3sqjCA"
                    },
                    {
                        "bilateral": false,
                        "display_name": "Posterior Pelvic Tilt",
                        "goal_text": "Focused muscle activation",
                        "library_id": "79",
                        "name": "Posterior Pelvic Tilt",
                        "position_order": 11,
                        "reps_assigned": 10,
                        "seconds_duration": 20,
                        "seconds_per_rep": 2,
                        "seconds_per_set": null,
                        "sets_assigned": 1,
                        "unit_of_measure": "count",
                        "youtube_id": "q0gRZJ5M3ls"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Lying Knee Flexion and Hip Internal Rotation",
                        "goal_text": "Increase strength",
                        "library_id": "32",
                        "name": "Knee Flexion with Hip Internally Rotated",
                        "position_order": 12,
                        "reps_assigned": 10,
                        "seconds_duration": 40,
                        "seconds_per_rep": 2,
                        "seconds_per_set": null,
                        "sets_assigned": 1,
                        "unit_of_measure": "count",
                        "youtube_id": "ToOjPbDb6wQ"
                    }
                ],
                "end_time": "None",
                "goal_text": "Get stronger and move your groin, knee and hip more efficiently to prevent fatigue",
                "impact_score": 2,
                "inhibit_exercises": [
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Hip Flexor",
                        "goal_text": "Increase blood flow",
                        "library_id": "54",
                        "name": "SMR - Hip Flexor",
                        "position_order": 0,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "bdbsy5vFz10"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Outer Thigh (IT Band)",
                        "goal_text": "Increase blood flow",
                        "library_id": "4",
                        "name": "SMR - IT-Band",
                        "position_order": 1,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "asigNf1sh-k"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Hamstrings",
                        "goal_text": "Increase blood flow",
                        "library_id": "3",
                        "name": "SMR - Hamstrings",
                        "position_order": 2,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "wQ6uUuBWCbw"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Inner Thigh (Adductor)",
                        "goal_text": "Increase blood flow",
                        "library_id": "1",
                        "name": "SMR - Adductors",
                        "position_order": 3,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "vkVg1dEmjwE"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Foam Roll - Quads",
                        "goal_text": "Increase flexibility",
                        "library_id": "48",
                        "name": "SMR Quadriceps",
                        "position_order": 4,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "ERTVBjwgPS4"
                    }
                ],
                "integrate_exercises": [],
                "lengthen_exercises": [
                    {
                        "bilateral": true,
                        "display_name": "Standing Outer Hip (TFL) Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "28",
                        "name": "Standing TFL Static Stretch",
                        "position_order": 5,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "ClJL9Kn5DHw"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Lunging Hip Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "49",
                        "name": "Kneeling Hip Flexor Static Stretch",
                        "position_order": 6,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "XbN3TvLEm2A"
                    },
                    {
                        "bilateral": false,
                        "display_name": "Child's Pose (Arms Straight)",
                        "goal_text": "Increase flexibility",
                        "library_id": "103",
                        "name": "Child's Pose Arms Straight",
                        "position_order": 7,
                        "reps_assigned": 30,
                        "seconds_duration": 30,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "pJcobQf324o"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Lying Hamstring Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "9",
                        "name": "Hamstrings Static Stretch ",
                        "position_order": 8,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "z73l6oZUniQ"
                    },
                    {
                        "bilateral": true,
                        "display_name": "Standing Inner Thigh (Adductor) Stretch",
                        "goal_text": "Increase flexibility",
                        "library_id": "8",
                        "name": "Adductors Static Stretch",
                        "position_order": 9,
                        "reps_assigned": 30,
                        "seconds_duration": 60,
                        "seconds_per_rep": null,
                        "seconds_per_set": 30,
                        "sets_assigned": 1,
                        "unit_of_measure": "seconds",
                        "youtube_id": "Qmq5fGSrAmg"
                    }
                ],
                "minutes_duration": 11.5,
                "start_time": "None",
                "why_text": "mild soreness and discomfort and hard effort"
            }
        }
    ]
}
```

### Training Seasons

#### athlete seasons

##### Query String
The client __must__ submit a request to the endpoint `/plans/version/athlete_seasons`. The request method __must__ be `POST`.

##### Request
The client __must__ submit a request body containing a JSON object with the following schema:
```
{
	"user_id": Uuid,
	"seasons": [season1, season2]
}
```
* `season` object __should__ be of following shcema:
```
{
	"sport": string,
	"competition_level": string,
	"start_date": string,
	"end_date": string,
	"positions": [string, string]
}
```
* `start_date` and `end_date` __should__ be of format `yyyy-mm`


```
POST /plans/version/athlete_seasons HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    "user_id": "02cb7965-7921-493a-80d4-6b278c928fad",
    "seasons": [
            {
               "sport": "soccer",
               "competition_level":  "NCAA div 1",
               "start_date": "2018-06",
               "end_date": "2018-09",
               "positions": ["forward"]
               }
            ]
}
```
##### Responses
 If the write was successful, the Service __will__ respond with HTTP Status `201 Created`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```

### Misc

#### Clear user's data
This endpoint can used to clear the user's data for the given day. Note that his endpoint is restricted to select demo accounts and user must be authorized to perform the action. It will clear out users daily readiness survey and their plan for the day. If the request is made before 3 am, plan and surveys for the previous day will be cleared which is consistent with 3am being the cutoff time for the new daily plan.

##### Query String
The client __must__ submit a request to the endpoint `/plans/version/misc/clear_user_data`. The request method __must__ be `POST`.

##### Request
The client __must__ submit a request body containing a JSON object with the following schema:
```
{
    "event_date": Datetime
}
```
* `event_date` __should__ reflect the local date and time when the request was made

```
POST /plans/version/misc/clear_user_data HTTPS/1.1
Host: apis.env.fathomai.com
Content-Type: application/json
Authorization: eyJraWQ...ajBc4VQ

{
    {"event_date": "2018-08-13T11:12:30Z"}
}
```
##### Responses
 If clearing data was successful, the Service __will__ respond with HTTP Status `200 OK`, with a body with the following syntax:
 
```
{
    "message": "success"
}
```

